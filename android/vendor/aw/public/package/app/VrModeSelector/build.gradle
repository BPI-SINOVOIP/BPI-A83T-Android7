// Top-level build file where you can add configuration options common to all sub-projects/modules.

ext {
    buildToolsVersion = '23.0.3'
    compileSdkVersion = 25

    minSdkVersion = 14
    targetSdkVersion = 25

    versionCode = 1
    versionName = '1.0.0'

    // all libs version defined here
    libs = [
        support_v4:      'com.android.support:support-v4:23.4.0',
    ]
}

buildscript {
    repositories {
        jcenter()
        mavenLocal()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:2.1.2'

        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

allprojects {
    repositories {
        jcenter()
        mavenLocal()
        flatDir{
            dirs 'libs'
        }
    }
}

apply plugin: 'com.android.application'

android {
    buildToolsVersion rootProject.ext.buildToolsVersion
    compileSdkVersion rootProject.ext.compileSdkVersion

    lintOptions {
        abortOnError false
    }

    defaultConfig {
        applicationId    "com.softwinner.VrModeSelector"
        minSdkVersion    rootProject.ext.minSdkVersion
        targetSdkVersion rootProject.ext.targetSdkVersion
        versionCode      rootProject.ext.versionCode
        versionName      rootProject.ext.versionName
    }

    sourceSets {
        main {
            manifest.srcFile 'AndroidManifest.xml'
            java.srcDirs = ['src']
            aidl.srcDirs = ['src']
            renderscript.srcDirs = ['src']
            res.srcDirs = ['res']
            assets.srcDirs = ['assets']
            jniLibs.srcDirs = ['libs']
            //jniLibs.srcDirs = ['jni']
        }
    }

    //signingConfigs {
    //    release {
    //        storeFile file("release.keystore")
    //        keyAlias "passwd"
    //        storePassword "passwd"
    //        keyPassword "passwd"
    //    }
    //}

    buildTypes {
        release {
            minifyEnabled false
            //proguardFiles 'proguard.flags'
            //signingConfig signingConfigs.release
        }
        debug {
            versionNameSuffix "-dev"
        }
    }

    applicationVariants.all { variant ->
        variant.outputs.each { output ->
            def outputFile = output.outputFile
            if (outputFile != null && outputFile.name.endsWith(".apk") && !outputFile.name.endsWith("unaligned.apk") ) {
                def flavor = variant.mergedFlavor
                def flavorName = variant.properties.get("flavorName")
                if ("" != flavorName) {
                    flavorName = "-" + flavorName
                }
                def debugFlag = "-release"
                if (variant.buildType.isDebuggable()) {
                    debugFlag = "-debug"
                }
                def suffix = flavor.getVersionName() + flavorName + debugFlag
                def fileName = "VrModeSelector-v${suffix}.apk"
                output.outputFile = new File(outputFile.parent, fileName)
            }
        }
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    //compile libs.support_v4
}

